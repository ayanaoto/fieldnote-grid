<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>工程表: {{ project.name }}</title>
    <!-- ★★★ Google Fonts (Noto Sans JP) 読み込みを追加 ★★★ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <!-- ★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★ -->
    <style>
        @page {
            size: A4 landscape; /* 横向き */
            margin: 1cm;
        }
        /* ★★★ body にフォント指定を追加 ★★★ */
        body {
            font-family: 'Noto Sans JP', sans-serif; /* ← フォント指定を追加 */
            font-size: 9pt; /* 全体のフォントサイズを少し小さめに */
            color: #333;
        }
        h1 {
            font-size: 14pt;
            font-weight: bold;
            text-align: center;
            margin-bottom: 15px;
            border-bottom: 1px solid #ccc;
            padding-bottom: 8px;
        }
        .project-info {
            margin-bottom: 15px;
            font-size: 10pt;
            text-align: center; /* 中央揃えに */
        }
        .gantt-container {
            width: 100%;
            overflow: hidden; /* SVGがはみ出ないように */
            margin: 0 auto; /* 中央揃え */
        }
        /* SVG自体のスタイル調整 */
        .gantt-container svg {
            max-width: 100%; /* コンテナ幅に合わせる */
            height: auto;
            display: block; /* 余白削除 */
            margin: 0 auto; /* 中央揃え */
            /* SVG内のフォントも指定 (重要) */
            font-family: 'Noto Sans JP', sans-serif !important;
        }
        /* Frappe Gantt のデフォルトスタイルを上書きしてフォントサイズ調整 */
        .gantt .bar-label {
            font-size: 8pt !important; /* タスク名の文字サイズ */
            fill: #555 !important; /* 文字色を濃く */
        }
        .gantt .grid-header text,
        .gantt .tick text {
             font-size: 7pt !important; /* 日付ヘッダーの文字サイズ */
             fill: #666 !important;
        }
        /* SVG内の日本語フォントが指定されない場合があるため再指定 */
        text {
             font-family: 'Noto Sans JP', sans-serif !important;
        }

    </style>
</head>
<body>
    <h1>工程表: {{ project.name }}</h1>

    <div class="project-info">
        {% if project.start_date and project.end_date %}
            期間: {{ project.start_date|date:"Y/n/j" }} - {{ project.end_date|date:"Y/n/j" }}
        {% elif project.start_date %}
            開始日: {{ project.start_date|date:"Y/n/j" }}
        {% elif project.end_date %}
            終了日: {{ project.end_date|date:"Y/n/j" }}
        {% endif %}
        <span style="margin-left: 20px;">作成日: {% now "Y-m-d" %}</span>
    </div>

    <div class="gantt-container">
        <!-- JavaScriptから渡されたSVGデータをここに埋め込む -->
        {{ svg_data|safe }}
    </div>

</body>
</html>
