{% extends "app/base.html" %}
{% load static %}

{% block title %}{% if mode == "edit" %}チェックリストを編集{% else %}チェックリストを作成{% endif %}{% endblock %}

{% block content %}
<div class="container">
  <h3 class="mb-3">
    {% if mode == "edit" %}チェックリストを編集{% else %}新しいチェックリスト{% endif %}
  </h3>

  {% if project %}
    <p class="text-muted">案件：<a href="{% url 'project_detail' pk=project.pk %}">{{ project.name }}</a></p>
  {% endif %}

  <form method="post" novalidate>
    {% csrf_token %}
    <div class="mb-3">
      <label class="form-label">{{ form.title.label }}</label>
      {{ form.title }}
      {% if form.title.errors %}
        <div class="text-danger small">{{ form.title.errors }}</div>
      {% endif %}
    </div>

    <div class="d-flex gap-2">
      <button type="submit" class="btn btn-primary">保存</button>
      {% if project %}
        <a class="btn btn-secondary" href="{% url 'project_detail' pk=project.pk %}">戻る</a>
      {% elif object %}
        <a class="btn btn-secondary" href="{% url 'project_detail' pk=object.project.pk %}">戻る</a>
      {% else %}
        <a class="btn btn-secondary" href="{% url 'home' %}">戻る</a>
      {% endif %}
    </div>
  </form>
</div>
{% endblock %}
